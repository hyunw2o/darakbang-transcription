"""
기독교 용어 사전 - 다락방 전도운동 특화
류광수 목사 / 이주현 목사 교회 용어 포함
"""

# ===== 1. 삼위일체 / 하나님 =====
TRINITY = [
    "하나님", "하느님",
    "예수님", "예수 그리스도", "그리스도", "주님", "주 예수",
    "성령님", "성신", "보혜사",
    "성부", "성자", "성령",
    "성삼위",
    "여호와", "야훼", "엘로힘", "아도나이",
    "임마누엘", "메시아",
    "예수는 그리스도",
]

# ===== 2. 다락방 핵심 용어 (최우선) =====
DARAKBANG_CORE = [
    # 핵심 비전
    "렘넌트", "237", "5000", "237나라", "5000종족",
    "237 빛",
    
    # 7 시리즈
    "7망대", "7여정", "7이정표",
    "절대 망대", "절대 여정", "절대 이정표",
    "7포인트", "7천제자",
    "777 기도",
    "1천망대",
    
    # 단계/개념
    "재창조", "천명", "소명", "사명",
    "보좌화", "생활화", "개인화", "제자화", "세계화",
    
    # 장소/구조
    "다락방", "미션홈", "지교회", "팀사역",
    "마가다락방", "갈보리산", "감람산",
    
    # 특수 용어
    "홀리메이슨",
    "CVDIP", 
    
    # 영문 용어
    "Heavenly", "Thronely", "Eternally",
    
    # 대상
    "TCK", "CCK", "NCK",
    "렘넌트 세대",
    
    # 영적 전쟁 용어
    "사단", "흑암", "보좌", "시공간", "전무후무",
    
    # 성경 관련
    "네피림", "바벨탑",
    
    # 예배 용어
    "교독", "합독", "교독문",
]

# ===== 3. 담임목사 =====
PASTORS = [
    "류광수 목사", "류광수 목사님",
    "이주현 목사", "이주현 목사님",
]

# ===== 4. 예배 용어 =====
WORSHIP_TERMS = [
    "교독", "합독", "교독문",
    "전주", "찬송", "기도", "성경봉독",
    "설교", "말씀", "헌금", "송영", "축도", "후주",
    "개회찬송", "폐회찬송",
    "대표기도", "합심기도", "통성기도",
    "렘넌트 예배", "지교회 예배",
]

# ===== 5. 자주 틀리는 발음/표기 교정 사전 =====
COMMON_MISTAKES = {
    # 숫자 관련
    "이삼칠": "237",
    "이백삼십칠": "237",
    "오천": "5000",
    
    # 영문 음차
    "램넌트": "렘넌트",
    "레넌트": "렘넌트",
    "레므난트": "렘넌트",
    
    # 발음 유사어
    "망대": "망대",
    "칠망대": "7망대",
    "칠여정": "7여정",
    "칠이정표": "7이정표",
    
    # 영어 용어
    "헤븐리": "Heavenly",
    "쓰론리": "Thronely",
    "이터널리": "Eternally",
    
    # 띄어쓰기
    "절대망대": "절대 망대",
    "절대여정": "절대 여정",
    "절대이정표": "절대 이정표",
    
    # 일반 기독교 용어
    "부활젤": "부활절",
    "성탄젤": "성탄절",
    "하나 님": "하나님",
    "예수 님": "예수님",
    "성령 님": "성령님",
}

# ===== 6. 성경 주요 인물 =====
BIBLE_PEOPLE = [
    "아담", "이브", "노아", "아브라함", "이삭", "야곱",
    "요셉", "모세", "아론", "여호수아", "사무엘",
    "다윗", "솔로몬", "엘리야", "엘리사", "이사야", "예레미야",
    "에스겔", "다니엘", "요나",
    "마리아", "요셉", "세례 요한", "베드로", "바울",
    "요한", "야고보", "마태", "누가", "마가",
]

# ===== 7. 성경 지명 =====
BIBLE_PLACES = [
    "예루살렘", "베들레헴", "나사렛", "갈릴리",
    "가나안", "애굽", "이집트", "바벨론",
    "갈보리산", "감람산", "시온산",
    "요단강", "홍해", "사해",
]

# ===== 8. 절기 =====
HOLIDAYS = [
    "부활절", "성탄절", "크리스마스", "추수감사절",
    "성령강림절", "사순절", "대강절",
    "고난주간", "종려주일", "성금요일",
]

# ===== 9. 신학 용어 =====
THEOLOGY = [
    "구원", "은혜", "믿음", "신앙",
    "회개", "중생", "성화", "칭의",
    "속죄", "화목", "구속",
    "영생", "천국", "지옥", "심판",
    "부활", "재림", "종말",
    "언약", "율법", "복음", "진리",
]

# ===== 10. 직분 =====
POSITIONS = [
    "목사", "목사님", "담임목사", "담임목사님",
    "장로", "장로님", "권사", "권사님",
    "집사", "집사님", "안수집사", "서리집사",
    "전도사", "전도사님",
    "사모", "사모님",
    "구역장", "순장", "셀리더", "팀장",
]

# ===== 통합 용어 리스트 =====
ALL_CHURCH_TERMS = (
    DARAKBANG_CORE +
    PASTORS +
    TRINITY +
    WORSHIP_TERMS +
    BIBLE_PEOPLE +
    BIBLE_PLACES +
    HOLIDAYS +
    THEOLOGY +
    POSITIONS
)

def get_gemini_prompt():
    """
    Gemini용 시스템 프롬프트 (음성 인식 + 교정 동시 수행)
    """
    return f"""
역할: 당신은 '류광수/이주현 목사' 계열의 다락방 전도운동 메시지 전문 속기사입니다.
제공된 오디오 파일을 한국어로 정확하게 받아쓰십시오.

[필수 용어 사전]
이 용어들이 들리면 반드시 아래 표기법을 따르십시오:
- 237, 5000, 237나라, 5000종족 (숫자 유지)
- 렘넌트 (Remnant)
- 7망대, 7여정, 7이정표 (숫자 7 + 단어)
- CVDIP (영어 약어 유지)
- Heavenly, Thronely, Eternally (영어 유지)
- TCK, CCK, NCK (영어 약어 유지)

[작성 규칙]
1. 설교자의 말을 빠짐없이 기록하십시오. (Full Verbatim 아님, 가독성 있게 정제)
2. '아', '음', '그' 같은 무의미한 감탄사는 제외하십시오.
3. 문맥상 다락방 용어인지 확인하고 정확히 사용하십시오. (예: 이삼칠 -> 237)
"""

def correct_text(text: str) -> str:
    """
    1차 텍스트 교정 (규칙 기반)
    """
    corrected = text
    
    # 1. 사전 기반 교정
    for wrong, right in COMMON_MISTAKES.items():
        corrected = corrected.replace(wrong, right)
    
    # 2. 숫자 패턴 교정
    import re
    
    corrected = re.sub(r'이\s*삼\s*칠', '237', corrected)
    corrected = re.sub(r'이백\s*삼십\s*칠', '237', corrected)
    corrected = re.sub(r'오\s*천', '5000', corrected)
    
    corrected = re.sub(r'칠\s*망대', '7망대', corrected)
    corrected = re.sub(r'칠\s*여정', '7여정', corrected)
    corrected = re.sub(r'칠\s*이정표', '7이정표', corrected)
    corrected = re.sub(r'칠\s*칠\s*칠', '777', corrected)
    
    # 성경 구절 형식 통일
    corrected = re.sub(
        r'([가-힣]+)\s*(\d+)\s*장\s*(\d+)\s*절',
        r'\1 \2장 \3절',
        corrected
    )
    
    return corrected

def get_claude_context():
    """
    Claude에게 전달할 다락방 용어 컨텍스트
    """
    context = """당신은 류광수 목사 계열 다락방 전도운동 교회의 설교 전문 편집자입니다.

=== 필수 용어 (정확히 유지) ===

【핵심 비전】
- 렘넌트: 하나님이 남겨둔 소수 정예
- 237: 세계 237개국
- 5000: 5000종족
- 237나라, 5000종족 (항상 이렇게 표기)

【7 메시지】
- 7망대, 7여정, 7이정표
- 절대 망대, 절대 여정, 절대 이정표
- 777 기도, 7포인트, 7천제자

【단계】
- 보좌화 → 생활화 → 개인화 → 제자화 → 세계화

【장소/구조】
- 다락방, 미션홈, 지교회
- 마가다락방, 갈보리산, 감람산

【영문 용어】
- Heavenly, Thronely, Eternally (영문 그대로)
- TCK, CCK, NCK, CVDIP (약어 그대로)

【목회자】
- 류광수 목사님
- 이주현 목사님

【영적 개념】
- 천명, 소명, 사명
- 재창조, 시공간 초월, 전무후무
- 보좌, 사단, 흑암

=== 교정 규칙 ===
1. 위 용어는 절대 바꾸지 말 것
2. 숫자는 아라비아 숫자 유지 (237, 5000, 7)
3. 영문은 영문 그대로 (Heavenly, TCK 등)
4. 하나님, 예수님, 성령님 존칭 유지
5. 성경 구절: "책명 X장 Y절" 형식
6. 문장은 자연스럽게, 의미는 변경 금지

=== 주의 사항 ===
- "렘넌트"를 "남은 자"로 바꾸지 말 것
- "237"을 "이삼칠"로 바꾸지 말 것
- 약어 풀어쓰지 말 것 (CVDIP → 그대로)
"""
    return context

def get_summary_prompt(summary_type: str = "short"):
    """
    다락방 설교 요약 프롬프트
    """
    if summary_type == "short":
        return """다음 설교를 3-5문장으로 요약해주세요.

주보에 들어갈 내용입니다.

포함 사항:
- 본문 말씀 (성경 구절)
- 핵심 메시지
- 다락방 용어는 그대로 유지 (렘넌트, 237, 7망대 등)

형식:
본문: (성경 구절)
메시지: (핵심 내용 2-3문장)"""
    
    else:
        return """다음 설교를 상세히 요약해주세요.

【형식】
1. 본문 말씀: (성경 구절)

2. 핵심 메시지:
   (한 줄 요약)

3. 주요 내용:
   (1) 첫 번째 포인트
   (2) 두 번째 포인트
   (3) 세 번째 포인트

4. 렘넌트 적용:
   (실천 사항)

5. 기도 제목:
   (2-3개)

【주의】
- 다락방 용어 정확히 유지
- 숫자/영문 그대로"""

def print_terms_summary():
    """용어 통계 출력"""
    print("=== 다락방 교회 용어 로딩 완료 ===")
    print(f"다락방 핵심 용어: {len(DARAKBANG_CORE)}개")
    print(f"전체 용어: {len(ALL_CHURCH_TERMS)}개")
    print(f"교정 사전: {len(COMMON_MISTAKES)}개")
    print("\n【최우선 용어 샘플】")
    print(", ".join(DARAKBANG_CORE[:20]))
    print("\n【Gemini 프롬프트】")
    print(get_gemini_prompt())

if __name__ == "__main__":
    print_terms_summary()
    
    test_text = "오늘은 렘넌트에 대해서 이삼칠 나라와 오천 종족에 복음을 전할 칠망대에 대해 말씀드립니다"
    print("\n【교정 테스트】")
    print(f"원본: {test_text}")
    print(f"교정: {correct_text(test_text)}")
