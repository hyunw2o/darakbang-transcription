"""
기독교 용어 사전 - 다락방 전도운동 특화
류광수 목사 / 이주현 목사 교회 용어 포함
"""

# ===== 1. 삼위일체 / 하나님 =====
TRINITY = [
    "하나님",
    "예수님", "예수 그리스도", "그리스도", "주님", "주 예수",
    "성령님", "성신", "보혜사",
    "성부", "성자", "성령",
    "성삼위",
    "여호와", "야훼", "엘로힘", "아도나이",
    "임마누엘", "메시아",
    "예수는 그리스도",
]

# ===== 2. 다락방 핵심 용어 (최우선) =====
DARAKBANG_CORE = [
    # 핵심 비전
    "렘넌트", "237", "5000", "237나라", "5000종족",
    "237 빛", "파송",
    
    # 7 시리즈
    "7망대", "7여정", "7이정표",
    "절대 망대", "절대 여정", "절대 이정표",
    "7포인트", "7천제자",
    "777 기도",
    "1천망대",
    "1000 RUTC",
    "7000 RT 선교사"
    
    # 단계/개념
    "오직", "유일성", "재창조", "천명", "소명", "사명",
    "보좌화", "생활화", "개인화", "제자화", "세계화",
    
    # 장소/구조
    "다락방", "미션홈", "지교회", "팀사역",
    "마가다락방", "갈보리산", "감람산",
    "드로아교회",
    
    # 특수 용어
    "홀리메이슨",
    "CVDIP",
    "Covenant",
    "Vision",
    "Dream",
    "Image",
    "Practice",
    
    # 영문 용어
    "Heavenly", "Thronely", "Eternally",
    
    # 대상
    "TCK", "CCK", "NCK",
    "렘넌트 세대",
    "렘넌트",
    
    # 영적 전쟁 용어
    "사단", "흑암", "보좌", "시공간", "전무후무",
    "3단체", "뉴에이지", "프리메이슨", "유대인", "재앙", "지옥배경",

    # 성경 관련
    "네피림", "바벨탑",

    # 행사/모임
    "성회", "전도대회", "수련회", "전도집회", "집회", "세미나"

    # 선교 지역 약어
    "REA",  # Rwanda, East Africa, Africa
    "RUTC", # Remnant Training Unity Center
    "RTS",  # Remnant Theological Seminary
    "RSTS", # Remnant Summit Training School
    "RVS",  # Remnant Vision School
    "RPS",  # Remnant Parents School
    "RLS",  # Remnant Leader School
    "RGS",  # Remnant Global School
    
    # 예배 용어
    "교독", "합독", "교독문",
]

# ===== 3. 담임목사 =====
PASTORS = [
    "류광수 목사", "류광수 목사님",
    "이주현 목사", "이주현 목사님",
    "류광수", "이주현","장승경", "이진성", "황상배", "이성훈", "백운규", "김귀숙", 
    "이흥애", "정영자", "김명자",
    "서경", "김소영", "장대원", "송미솔", "엄희숙",
]

# ===== 4. 예배 용어 =====
WORSHIP_TERMS = [
    "교독", "합독", "교독문",
    "전주", "찬송", "기도", "성경봉독",
    "설교", "말씀", "헌금", "송영", "축도", "후주",
    "개회찬송", "폐회찬송",
    "대표기도", "합심기도", "통성기도",
    "렘넌트 예배", "지교회 예배",
]

# ===== 5. 자주 틀리는 발음/표기 교정 사전 =====
COMMON_MISTAKES = {
    # 숫자 관련
    "이삼칠": "237",
    "이백삼십칠": "237",
    "오천": "5000",
    
    # 영문 음차
    "램넌트": "렘넌트",
    "레넌트": "렘넌트",
    "레므난트": "렘넌트",
    
    # 발음 유사어
    "망대": "망대",
    "칠망대": "7망대",
    "칠여정": "7여정",
    "칠이정표": "7이정표",
    
    # 영어 용어
    "헤븐리": "Heavenly",
    "쓰론리": "Thronely",
    "이터널리": "Eternally",
    
    # 띄어쓰기
    "절대망대": "절대 망대",
    "절대여정": "절대 여정",
    "절대이정표": "절대 이정표",
    
    # 일반 기독교 용어
    "부활젤": "부활절",
    "성탄젤": "성탄절",
    "하나 님": "하나님",
    "예수 님": "예수님",
    "성령 님": "성령님",

    # 음성인식 오류 교정
    "할라고": "하려고",
    "갈라고": "가려고",
    "볼라고": "보려고",
    "알라고": "알려고",
    "먹을라고": "먹으려고",
    "배심": "뱃심",
    "최상머리": "책상머리",
    "찌나는": "찐한",
    "드로우게": "드로아교회",
    "드로우게교회": "드로아교회",
    "드로에게": "드로아교회",
    "드로에게교회": "드로아교회",
    "RLTS": "RRTS",
    "알리": "REA",
    "김근이": "김건희",
    "김소현": "김소영",
    "이지훈": "이주현",
    "이지호": "이주현",
    "장현승": "장한샘",
    "이혜나": "이예나",
    "애나": "예나",
    "두구": "투구",
    "렘피림": "네피림",
    "회 버아웃이": "회복이",

    # 선교 약어
    "알이에이": "REA",
    "아르이에이": "REA",

    # 성경/역사 용어 음성인식 오류
    "아수르": "앗수르",
    "유락민": "유랑민",
    "노량민": "유랑민",

    # 역사적 인물 음성인식 오류
    "쉽어": "쉬버",
    "시버": "쉬버",
    "록펠라": "록펠러",
    "로크펠러": "록펠러",
    "워너 메이커": "워너메이커",
    "워내메이커": "워너메이커",
    "워네메이커": "워너메이커",
    "카네기아": "카네기",
    "카르네기": "카네기",
    "마틴루터": "마틴 루터",
    "마틴루터킹": "마틴 루터 킹",
}

# ===== 6. 역사적 인물 =====
HISTORICAL_PEOPLE = [
    # 미국 역사적 인물
    "록펠러", "카네기", "워너메이커", "존 워너메이커", "쉬버",
    # 종교개혁자
    "마틴 루터",
]

# ===== 7. 성경 주요 인물 =====
BIBLE_PEOPLE = [
    "아담", "이브", "노아", "아브라함", "이삭", "야곱",
    "요셉", "모세", "아론", "여호수아", "사무엘",
    "다윗", "솔로몬", "엘리야", "엘리사", "이사야", "예레미야",
    "에스겔", "다니엘", "요나",
    "마리아", "요셉", "세례 요한", "베드로", "바울",
    "요한", "야고보", "마태", "누가", "마가",
    "사드랏", "메삭", "아벳느고",
    "이스마엘", "이스르엘", "라헬", "이드로", "이새", "한나", "사라",
    "빌립", "가인", "아벨", "스데반",
]

# ===== 7. 성경 지명 =====
BIBLE_PLACES = [
    "예루살렘", "베들레헴", "나사렛", "갈릴리",
    "가나안", "애굽", "이집트", "바벨론", "앗수르",
    "갈보리산", "감람산", "시온산",
    "요단강", "홍해", "사해", "여리고", "나일강",
    "아람", "아람 나라", "로마", "마게도냐", "드로아", "아시아",

]

# ===== 8. 절기 =====
HOLIDAYS = [
    "부활절", "성탄절", "크리스마스", "추수감사절",
    "성령강림절", "사순절", "대강절",
    "고난주간", "종려주일", "성금요일",
]

# ===== 9. 신학 용어 =====
THEOLOGY = [
    "구원", "은혜", "믿음", "신앙",
    "회개", "중생", "성화", "칭의",
    "속죄", "화목", "구속",
    "영생", "천국", "지옥", "심판",
    "부활", "재림", "종말",
    "언약", "율법", "복음", "진리",
]

# ===== 10. 직분 =====
POSITIONS = [
    "목사", "목사님", "담임목사", "담임목사님",
    "장로", "장로님", "권사", "권사님",
    "집사", "집사님", "안수집사", "서리집사",
    "전도사", "전도사님",
    "사모", "사모님",
    "구역장", "순장", "셀리더", "팀장",
]

# ===== 통합 용어 리스트 =====
ALL_CHURCH_TERMS = (
    DARAKBANG_CORE +
    PASTORS +
    TRINITY +
    WORSHIP_TERMS +
    HISTORICAL_PEOPLE +
    BIBLE_PEOPLE +
    BIBLE_PLACES +
    HOLIDAYS +
    THEOLOGY +
    POSITIONS
)

def get_gemini_prompt():
    """
    Gemini용 시스템 프롬프트 (음성 인식 + 교정 + 구조화)
    """
    return """당신은 '류광수/이주현 목사' 계열의 다락방 전도운동 메시지 전문 속기사입니다.

[필수 용어]
237, 5000, 237나라, 5000종족, 렘넌트, 7망대, 7여정, 7이정표, CVDIP, Heavenly, Thronely, Eternally, TCK, CCK, NCK, 777, 138, 3집중, 24·25·00
(이삼칠→237, 칠칠칠→777, 오천종족→5000종족 등 숫자/영어 표기 유지)

[가장 중요한 규칙 - 완전 녹취]
- 이것은 '요약'이 아니라 '받아쓰기'이다. 설교자가 말한 모든 문장을 빠짐없이 기록하라.
- 절대로 내용을 줄이거나 생략하지 마라. 30분 설교면 30분 분량의 텍스트가 나와야 한다.
- 비슷한 내용이 반복되더라도 설교자가 실제로 반복한 것이면 그대로 반복해서 기록하라.
- 출력 길이를 줄이려 하지 마라. 길어도 된다. 전부 기록하는 것이 가장 중요하다.

[작성 규칙]
1. 설교자가 말한 내용을 들리는 그대로 전부 기록하라. 한 문장도 빠뜨리지 마라.
2. 내용을 요약·생략·재구성하지 마라. 말한 순서 그대로 받아써라.
3. 한국어 발언만 기록하라. 중국어·영어 등 통역 부분은 완전히 무시하고 건너뛰어라.
   (한국어 설교-외국어 통역이 반복되는 경우, 한국어 부분만 이어서 기록하라.)
4. 다음 추임새만 제거하되, 실제 내용이 담긴 문장은 절대 삭제하지 마라:
   - 추임새/감탄사: '아', '음', '자', '어', '예', '응', '네', '에', '그'
   - 문장 시작의 '예,', '자,', '네,' 등 습관적 추임새만 삭제하라.
   - 주의: 추임새를 제거한다고 해서 문장 자체를 생략하면 안 된다.
5. 성경 구절 번호는 "23/" 형식으로 표기하라.
6. 발음이 부정확하거나 음성인식이 이상해도, 반드시 문맥에 맞는 올바른 단어로 교정하여 기록하라.
   - 예: '이승했습니다' → '이상했습니다' (문맥상 올바른 표현)
   - 예: '낳을라고' → '나으라고' (병을 낫게 하려는 문맥)
   - 예: '할라고' → '하려고' (구어체를 자연스러운 문어체로)
   - 발음이 비슷한 단어 중 문맥에 맞는 것을 선택하라.
7. 구어체 표현은 뜻을 유지하되 자연스러운 문장으로 다듬어라.
8. 비속어/속어: '인마', '야' 등 거친 표현만 생략하라."""


def get_gemini_content_prompt():
    """
    Gemini에게 전달할 콘텐츠 프롬프트 (출력 형식 + 예시)
    """
    return """아래 오디오 파일의 설교 내용을 받아쓰되, 반드시 다음 형식으로 출력하라.

[출력 형식 규칙]
- 특수 기호(▶, ■, ● 등)를 절대 사용하지 마라. 순수 텍스트만 출력하라.
- 마크다운(##, **, - 등) 사용 금지.
- 주제가 바뀌거나 새로운 포인트로 넘어갈 때 빈 줄로 문단을 구분하라.
- 한국어-외국어 통역이 반복되는 오디오인 경우, 외국어 통역 부분은 완전히 무시하고 한국어 발언만 이어서 기록하라.

[구조화 - 반드시 지켜라]
- 설교 흐름에 따라 아래 섹션 구분자를 반드시 별도 줄에 삽입하라:
  "본론" — 서론이 끝나고 본격적인 메시지가 시작되는 지점
  "결론" — 설교의 마무리/정리 부분
  "기도" — 마지막 기도가 시작되는 지점
- 각 구분자는 해당 단어만 단독으로 한 줄에 적어라. (예: 줄 전체가 "본론"만)
- 구분자 앞뒤에 빈 줄을 넣어라.
- 설교에 서론/본론/결론/기도 구분이 명확하지 않더라도, 흐름상 가장 적절한 위치에 삽입하라.

[출력 예시]
성경말씀 로마서 16장 23절이다. 같이 합독하시겠다. 23/ 나와 온 교회를 돌보아 주는 가이오도 너희에게 문안하고 이 성의 재무관 에라스도와 형제 구아도도 너희에게 문안하느니라. 오늘 이 말씀을 함께 나누겠다.

복음문화 산업인 선교사이다. 복음 가지고 사람을 살리는 문화 산업 선교사라는 것이다. 지금 우리 산업인들이 모였다. 중요한 언약을 찾는 메시지만 받지 말고 중요한 실천할 것을 찾는 시간이 되길 바란다. 우리는 복잡하면 안 된다. 단순해야 한다.

본론
예수님이 주신 반드시 승리하는 비밀, 그때나 지금이나 동일하다. 그게 뭐냐. 행1:1-8절이다. 가이오가 이것 잡은 것이다. 이 한 가지만 붙잡으면 모든 문제가 해결된다.

두 번째로 중요한 것이 있다. 바로 현장의 언약이다. 현장에 가면 하나님이 보여주신다. 그래서 바울이 로마에 간 것이다.

결론
비밀 붙잡고 가라. 예수님이 공생애 때 하신 것 그리고 요한삼서 1장 2절에 영혼 정신 육신 강건하기를 원하노라. 이 축복이 여러분에게 있기를 바란다.

기도
하나님 감사합니다. 하나님 우리가 성경을 몰랐다면 우리가 전도자를 만나지 못했다면...

위 예시처럼 오디오의 전체 내용을 빠짐없이 받아쓰되, 주제 단위로 문단을 나누어 출력하라.

[가장 중요 - 완전 녹취]
- 이것은 요약이 아니다. 설교자가 말한 모든 내용을 빠짐없이 전부 받아써라.
- 오디오에서 들리는 모든 한국어 문장을 기록하라. 한 문장이라도 빠뜨리면 실패다.
- 출력이 길어지는 것을 두려워하지 마라. 짧게 줄이지 마라.
- 같은 말을 반복하더라도 실제로 반복한 것이면 그대로 적어라.

[추가 규칙]
1. 발음이 불명확하거나 음성인식이 부정확한 부분은 반드시 문맥을 고려하여 올바른 단어로 교정하라.
2. 추임새('예,', '자,', '아,', '어,', '응,', '네,')만 삭제하되, 실제 내용 문장은 절대 삭제하지 마라."""

def get_gemini_correction_prompt():
    """
    Gemini 텍스트 교정 전용 프롬프트 (2단계 방식)
    Whisper가 받아쓴 raw 텍스트를 교정 + 구조화하는 용도.
    오디오는 이미 텍스트로 변환된 상태이므로, 텍스트→텍스트 교정에 집중.
    """
    return """당신은 '류광수/이주현 목사' 계열 다락방 전도운동 설교 텍스트 전문 편집자입니다.

아래 [원본 텍스트]는 음성인식(STT)으로 받아쓴 설교 녹취록입니다.
이 텍스트를 교정하고 구조화하되, 반드시 아래 규칙을 따르세요.

[가장 중요한 규칙 - 내용 보존]
- 원본의 모든 문장을 빠짐없이 유지하라. 한 문장도 삭제하지 마라.
- 내용을 요약하거나 줄이지 마라. 원본 길이와 비슷하게 출력하라.
- 비슷한 내용이 반복되더라도 원본에 있으면 그대로 유지하라.
- 출력이 길어도 괜찮다. 짧게 줄이려 하지 마라.

[용어 교정]
- 다락방 전도운동 핵심 용어는 정확히 표기하라:
  237, 5000종족, 렘넌트, 7망대, 7여정, 7이정표, CVDIP, 777, 138, 3집중
  Heavenly, Thronely, Eternally, TCK, CCK, NCK, REA, RRTS
  이삼칠→237, 칠칠칠→777, 오천종족→5000종족 (숫자/영어 표기 유지)
- 음성인식 오류를 문맥에 맞게 교정하라:
  드로우게/드로에게→드로아교회, 아수르→앗수르, 유락민/노량민→유랑민
  할라고→하려고, 갈라고→가려고, 배심→뱃심
- 인명 교정: 김근이→김건희, 김소현→김소영, 이지훈/이지호→이주현, 장현승→장한샘
- 성경 구절 번호는 "23/" 형식으로 표기하라.

[추임새 제거]
- 문장 시작의 습관적 추임새만 삭제: '예,', '자,', '아,', '어,', '응,', '네,'
- 비속어/속어: '인마', '야' 등 거친 표현만 생략
- 주의: 추임새를 제거한다고 문장 자체를 삭제하면 안 된다.

[구조화 - 반드시 적용]
- 설교 흐름에 따라 아래 구분자를 반드시 별도 줄에 삽입하라:
  "본론" — 서론이 끝나고 본격적인 메시지 시작 지점
  "결론" — 설교의 마무리/정리 부분
  "기도" — 마지막 기도 시작 지점
- 각 구분자는 해당 단어만 단독으로 한 줄에 적어라.
- 구분자 앞뒤에 빈 줄을 넣어라.

[출력 형식]
- 특수 기호(▶, ■, ● 등) 사용 금지. 순수 텍스트만.
- 마크다운(##, **, - 등) 사용 금지.
- 주제가 바뀌거나 새 포인트로 넘어갈 때 빈 줄로 문단 구분.
- 한국어 부분만 출력. 외국어 통역 부분은 제외.
- 구어체는 뜻을 유지하되 자연스러운 문장으로 다듬어라.

[출력 예시]
성경말씀 로마서 16장 23절이다. 같이 합독하시겠다. 23/ 나와 온 교회를 돌보아 주는 가이오도 너희에게 문안하고 이 성의 재무관 에라스도와 형제 구아도도 너희에게 문안하느니라.

서론
우리는 렘넌트가 걸어가야할 길이 있음을 확신한다.

본론
예수님이 주신 반드시 승리하는 비밀이 있다. 행1:1-8절이다.

결론
비밀 붙잡고 가라. 이 축복이 여러분에게 있기를 바란다.

기도
하나님 감사합니다.
기도하시겠습니다.
하나님께 감사드립니다.

위 형식대로 [원본 텍스트]를 교정하여 출력하라. 내용은 절대 줄이지 마라."""


# ===== 일반 한국어 교정 (모든 유형 공통) =====
GENERAL_CORRECTIONS = {
    "할라고": "하려고",
    "갈라고": "가려고",
    "볼라고": "보려고",
    "알라고": "알려고",
    "먹을라고": "먹으려고",
    "배심": "뱃심",
}


def get_phonecall_correction_prompt():
    """통화 녹취 교정 프롬프트"""
    return """당신은 전문 통화 녹취록 편집자입니다.

아래 [원본 텍스트]는 음성인식(STT)으로 받아쓴 전화 통화 녹취록입니다.
이 텍스트를 교정하고 구조화하되, 반드시 아래 규칙을 따르세요.

[가장 중요한 규칙 - 내용 보존]
- 원본의 모든 문장을 빠짐없이 유지하라. 한 문장도 삭제하지 마라.
- 내용을 요약하거나 줄이지 마라. 원본 길이와 비슷하게 출력하라.
- 비슷한 내용이 반복되더라도 원본에 있으면 그대로 유지하라.

[화자 분리 - 반드시 적용]
- 통화 참여자를 구분하여 각 발언 앞에 화자 레이블을 붙여라.
- 화자가 2명인 경우: "화자 A:" 와 "화자 B:" 를 사용하라.
- 음성의 톤, 말투, 호칭, 문맥을 분석하여 화자를 구분하라.
- 화자가 바뀔 때마다 빈 줄을 넣고 새 화자 레이블을 시작하라.
- 같은 화자의 연속 발언은 하나의 블록으로 묶어라.

[텍스트 교정]
- 음성인식 오류를 문맥에 맞게 교정하라.
- 구어체 표현은 뜻을 유지하되 자연스러운 문장으로 다듬어라.
- 인명, 지명, 회사명 등 고유명사는 문맥을 고려하여 정확하게 기록하라.

[추임새 제거]
- 문장 시작의 습관적 추임새만 삭제: '예,', '자,', '아,', '어,', '응,', '네,'
- 대화의 흐름에서 의미 있는 응답('네', '예' 등)은 유지하라.

[출력 형식]
- 특수 기호(▶, ■, ● 등) 사용 금지. 순수 텍스트만.
- 마크다운(##, **, - 등) 사용 금지.

[구조화 - 반드시 적용]
- 통화 내용 뒤에 빈 줄 2개를 넣고 다음 형식으로 요약을 추가하라:

요약
(통화의 주요 목적과 맥락을 2-3문장으로 정리)

주요 내용
1. 첫 번째 핵심 사항
2. 두 번째 핵심 사항
3. 세 번째 핵심 사항

[출력 예시]
화자 A: 안녕하세요, 김과장님. 다음 주 회의 일정 관련해서 연락드렸습니다.

화자 B: 네, 말씀하세요.

화자 A: 다음 주 수요일 오후 2시에 진행하려고 하는데 괜찮으시겠습니까?

화자 B: 수요일은 좀 어려울 것 같은데요. 목요일로 변경 가능할까요?


요약
다음 주 회의 일정 조율을 위한 통화. 수요일에서 목요일로 변경 합의.

주요 내용
1. 회의 일정: 목요일 오후 2시로 변경
2. 참석 인원: 5명 확정
3. 자료 공유: 회의 전날까지

위 형식대로 [원본 텍스트]를 교정하여 출력하라. 내용은 절대 줄이지 마라."""


def get_conversation_correction_prompt():
    """대화/회의 녹취 교정 프롬프트"""
    return """당신은 전문 회의록 편집자입니다.

아래 [원본 텍스트]는 음성인식(STT)으로 받아쓴 대화/회의 녹취록입니다.
이 텍스트를 교정하고 구조화하되, 반드시 아래 규칙을 따르세요.

[가장 중요한 규칙 - 내용 보존]
- 원본의 모든 문장을 빠짐없이 유지하라. 한 문장도 삭제하지 마라.
- 내용을 요약하거나 줄이지 마라. 원본 길이와 비슷하게 출력하라.

[화자 분리 - 반드시 적용]
- 회의 참석자를 구분하여 각 발언 앞에 화자 레이블을 붙여라.
- 화자를 "참석자 1:", "참석자 2:", "참석자 3:" 등으로 표시하라.
- 이름이나 직함이 언급되면 레이블에 반영하라. (예: "참석자 1(김팀장):")
- 화자가 바뀔 때마다 빈 줄을 넣고 새 화자 레이블을 시작하라.

[텍스트 교정]
- 음성인식 오류를 문맥에 맞게 교정하라.
- 구어체 표현은 뜻을 유지하되 자연스러운 문장으로 다듬어라.
- 전문 용어, 프로젝트명, 고유명사는 문맥을 고려하여 정확하게 기록하라.

[추임새 제거]
- 문장 시작의 습관적 추임새만 삭제.
- 대화의 흐름에서 의미 있는 응답은 유지하라.

[출력 형식]
- 특수 기호(▶, ■, ● 등) 사용 금지. 순수 텍스트만.
- 마크다운(##, **, - 등) 사용 금지.

[구조화 - 반드시 적용]
- 대화 내용 뒤에 빈 줄 2개를 넣고, 다음 형식으로 회의록 요약을 추가하라:

요약
(회의의 주요 목적과 맥락을 2-3문장으로 정리)

논의 안건
1. 안건 제목 - 논의 결과
2. 안건 제목 - 논의 결과

결정 사항
1. 결정 사항
2. 결정 사항

후속 조치
1. 담당: OOO - 내용 (기한)
2. 담당: OOO - 내용 (기한)

[출력 예시]
참석자 1(김팀장): 오늘 회의는 다음 분기 마케팅 전략에 대해 논의하겠습니다.

참석자 2(이대리): 지난 분기 매출은 전년 대비 15% 증가했습니다.

참석자 3(박과장): 온라인 쪽은 좋았는데 오프라인 매장 실적은 5% 감소했습니다.


요약
다음 분기 마케팅 전략 수립을 위한 회의. 지난 분기 실적 리뷰와 향후 방향 논의.

논의 안건
1. 지난 분기 실적 - 매출 15% 증가, 오프라인 5% 감소
2. 다음 분기 전략 - 온라인 강화 + 오프라인 개선 병행

결정 사항
1. 온라인 마케팅 예산 20% 증액
2. 오프라인 매장 리뉴얼 검토

후속 조치
1. 담당: 이대리 - 온라인 마케팅 세부 계획 수립 (2주 내)
2. 담당: 박과장 - 오프라인 매장 분석 보고서 작성 (1주 내)

위 형식대로 [원본 텍스트]를 교정하여 출력하라. 내용은 절대 줄이지 마라."""


def get_correction_prompt_by_type(transcription_type: str = "sermon") -> str:
    """녹취 유형별 Gemini 교정 프롬프트 반환"""
    if transcription_type == "phonecall":
        return get_phonecall_correction_prompt()
    elif transcription_type == "conversation":
        return get_conversation_correction_prompt()
    else:
        return get_gemini_correction_prompt()


def correct_text(text: str, transcription_type: str = "sermon") -> str:
    """
    1차 텍스트 교정 (규칙 기반)
    transcription_type: "sermon" | "phonecall" | "conversation"
    """
    corrected = text
    import re

    if transcription_type == "sermon":
        # 설교: 전체 교정 (교회 용어 + 일반)
        for wrong, right in COMMON_MISTAKES.items():
            corrected = corrected.replace(wrong, right)

        # 숫자 패턴 교정 (교회 전용)
        corrected = re.sub(r'이\s*삼\s*칠', '237', corrected)
        corrected = re.sub(r'이백\s*삼십\s*칠', '237', corrected)
        corrected = re.sub(r'오\s*천', '5000', corrected)
        corrected = re.sub(r'칠\s*망대', '7망대', corrected)
        corrected = re.sub(r'칠\s*여정', '7여정', corrected)
        corrected = re.sub(r'칠\s*이정표', '7이정표', corrected)
        corrected = re.sub(r'칠\s*칠\s*칠', '777', corrected)

        # 성경 구절 형식 통일
        corrected = re.sub(
            r'([가-힣]+)\s*(\d+)\s*장\s*(\d+)\s*절',
            r'\1 \2장 \3절',
            corrected
        )
    else:
        # 통화/대화: 일반 한국어 교정만
        for wrong, right in GENERAL_CORRECTIONS.items():
            corrected = corrected.replace(wrong, right)

    # 추임새 제거 (모든 유형 공통)
    corrected = re.sub(r'(?m)^(예|아|자|어|응|네|에|그)[,.\s~]+', '', corrected)
    corrected = re.sub(r'(?<=[.?!])\s*(예|아|자|어|응|네)[,~]\s*', ' ', corrected)
    corrected = re.sub(r'\n{3,}', '\n\n', corrected)

    return corrected

def get_claude_context():
    """
    Claude에게 전달할 다락방 용어 컨텍스트
    """
    context = """당신은 류광수 목사 계열 다락방 전도운동 교회의 설교 전문 편집자입니다.

=== 필수 용어 (정확히 유지) ===

【핵심 비전】
- 렘넌트: 하나님이 남겨둔 소수 정예
- 237: 세계 237개국
- 5000: 5000종족
- 237나라, 5000종족 (항상 이렇게 표기)

【7 메시지】
- 7망대, 7여정, 7이정표
- 절대 망대, 절대 여정, 절대 이정표
- 777 기도, 7포인트, 7천제자

【단계】
- 보좌화 → 생활화 → 개인화 → 제자화 → 세계화

【장소/구조】
- 다락방, 미션홈, 지교회
- 마가다락방, 갈보리산, 감람산

【영문 용어】
- Heavenly, Thronely, Eternally (영문 그대로)
- TCK, CCK, NCK, CVDIP (약어 그대로)

【목회자】
- 류광수 목사님
- 이주현 목사님

【영적 개념】
- 천명, 소명, 사명
- 재창조, 시공간 초월, 전무후무
- 보좌, 사단, 흑암

=== 교정 규칙 ===
1. 위 용어는 절대 바꾸지 말 것
2. 숫자는 아라비아 숫자 유지 (237, 5000, 7)
3. 영문은 영문 그대로 (Heavenly, TCK 등)
4. 하나님, 예수님, 성령님 존칭 유지
5. 성경 구절: "책명 X장 Y절" 형식
6. 문장은 자연스럽게, 의미는 변경 금지

=== 주의 사항 ===
- "렘넌트"를 "남은 자"로 바꾸지 말 것
- "237"을 "이삼칠"로 바꾸지 말 것
- 약어 풀어쓰지 말 것 (CVDIP → 그대로)
"""
    return context

def get_summary_prompt(summary_type: str = "short"):
    """
    다락방 설교 요약 프롬프트
    """
    if summary_type == "short":
        return """다음 설교를 3-5문장으로 요약해주세요.

주보에 들어갈 내용입니다.

포함 사항:
- 본문 말씀 (성경 구절)
- 핵심 메시지
- 다락방 용어는 그대로 유지 (렘넌트, 237, 7망대 등)

형식:
본문: (성경 구절)
메시지: (핵심 내용 2-3문장)"""
    
    else:
        return """다음 설교를 상세히 요약해주세요.

【형식】
1. 본문 말씀: (성경 구절)

2. 핵심 메시지:
   (한 줄 요약)

3. 주요 내용:
   (1) 첫 번째 포인트
   (2) 두 번째 포인트
   (3) 세 번째 포인트

4. 렘넌트 적용:
   (실천 사항)

5. 기도 제목:
   (2-3개)

【주의】
- 다락방 용어 정확히 유지
- 숫자/영문 그대로"""

def print_terms_summary():
    """용어 통계 출력"""
    print("=== 다락방 교회 용어 로딩 완료 ===")
    print(f"다락방 핵심 용어: {len(DARAKBANG_CORE)}개")
    print(f"전체 용어: {len(ALL_CHURCH_TERMS)}개")
    print(f"교정 사전: {len(COMMON_MISTAKES)}개")
    print("\n【최우선 용어 샘플】")
    print(", ".join(DARAKBANG_CORE[:20]))
    print("\n【Gemini 프롬프트】")
    print(get_gemini_prompt())

if __name__ == "__main__":
    print_terms_summary()
    
    test_text = "오늘은 렘넌트에 대해서 이삼칠 나라와 오천 종족에 복음을 전할 칠망대에 대해 말씀드립니다"
    print("\n【교정 테스트】")
    print(f"원본: {test_text}")
    print(f"교정: {correct_text(test_text)}")
